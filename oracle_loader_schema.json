{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Oracle SQL*Loader Control File Schema",
  "description": "JSON schema for Oracle SQL*Loader control file structure",
  "type": "object",
  "properties": {
    "loadData": {
      "type": "object",
      "description": "Main LOAD DATA section",
      "properties": {
        "characterSet": {
          "type": "string",
          "description": "Character set specification",
          "enum": ["UTF8", "AL32UTF8", "WE8ISO8859P1", "ZHS16GBK", "JA16SJIS", "KO16MSWIN949"]
        },
        "byteOrderMark": {
          "type": "string",
          "enum": ["YES", "NO"],
          "description": "Byte order mark handling"
        },
        "byteOrder": {
          "type": "string",
          "enum": ["LITTLE", "BIG"],
          "description": "Byte order specification"
        },
        "stringSizes": {
          "type": "string",
          "enum": ["BYTES", "CHARACTERS"],
          "description": "String size specification"
        },
        "lengthSemantics": {
          "type": "string",
          "enum": ["BYTE", "CHAR"],
          "description": "Length semantics"
        },
        "preprocessor": {
          "type": "string",
          "description": "Preprocessor executable command"
        },
        "fileSpecifications": {
          "type": "object",
          "properties": {
            "infile": {
              "oneOf": [
                {"type": "string"},
                {"type": "array", "items": {"type": "string"}}
              ],
              "description": "Input file specification(s)"
            },
            "badfile": {
              "type": "string",
              "description": "Bad file specification"
            },
            "discardfile": {
              "type": "string",
              "description": "Discard file specification"
            },
            "logfile": {
              "type": "string",
              "description": "Log file specification"
            }
          }
        },
        "processingOptions": {
          "type": "object",
          "properties": {
            "skip": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of rows to skip"
            },
            "load": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of rows to load"
            },
            "errors": {
              "type": "integer",
              "minimum": 0,
              "default": 50,
              "description": "Maximum number of errors"
            },
            "rows": {
              "type": "integer",
              "minimum": 1,
              "default": 64,
              "description": "Rows per commit"
            },
            "bindsize": {
              "type": "integer",
              "minimum": 1024,
              "default": 256000,
              "description": "Bind array size in bytes"
            },
            "readsize": {
              "type": "integer",
              "minimum": 1024,
              "default": 1048576,
              "description": "Read buffer size in bytes"
            },
            "direct": {
              "type": "boolean",
              "default": false,
              "description": "Direct path loading"
            },
            "parallel": {
              "type": "boolean",
              "default": false,
              "description": "Parallel loading"
            },
            "skipIndexMaintenance": {
              "type": "boolean",
              "default": false,
              "description": "Skip index maintenance"
            },
            "skipUnusableIndexes": {
              "type": "boolean",
              "default": false,
              "description": "Skip unusable indexes"
            },
            "resumable": {
              "type": "boolean",
              "default": false,
              "description": "Enable resumable loading"
            },
            "resumableName": {
              "type": "string",
              "description": "Resumable operation name"
            },
            "resumableTimeout": {
              "type": "integer",
              "minimum": 1,
              "default": 7200,
              "description": "Resumable timeout in seconds"
            },
            "externalTable": {
              "type": "string",
              "enum": ["NOT_USED", "GENERATE_ONLY", "EXECUTE"],
              "default": "NOT_USED",
              "description": "External table option"
            },
            "columnArrayRows": {
              "type": "integer",
              "minimum": 1,
              "default": 5000,
              "description": "Column array rows"
            },
            "multithreading": {
              "type": "boolean",
              "default": false,
              "description": "Enable multithreading"
            },
            "streamsize": {
              "type": "integer",
              "minimum": 1024,
              "default": 256000,
              "description": "Stream buffer size"
            }
          }
        }
      }
    },
    "tableSpecifications": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "tableName": {
            "type": "string",
            "description": "Target table name"
          },
          "loadingMode": {
            "type": "string",
            "enum": ["APPEND", "REPLACE", "INSERT", "TRUNCATE"],
            "default": "APPEND",
            "description": "Loading mode"
          },
          "whenCondition": {
            "type": "string",
            "description": "WHEN condition for conditional loading"
          },
          "fieldSpecifications": {
            "type": "object",
            "properties": {
              "terminatedBy": {
                "type": "string",
                "description": "Field terminator"
              },
              "enclosedBy": {
                "type": "string",
                "description": "Field enclosure character"
              },
              "optionallyEnclosed": {
                "type": "boolean",
                "default": false,
                "description": "Optional enclosure"
              },
              "trailingNullCols": {
                "type": "boolean",
                "default": false,
                "description": "Handle trailing null columns"
              },
              "ldrtrim": {
                "type": "string",
                "enum": ["LRTRIM", "LTRIM", "RTRIM", "NOTRIM"],
                "description": "Trim option"
              },
              "preserveBlanks": {
                "type": "boolean",
                "default": false,
                "description": "Preserve blank characters"
              }
            }
          },
          "columns": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Column name"
                },
                "dataType": {
                  "type": "string",
                  "description": "Oracle data type"
                },
                "position": {
                  "type": "object",
                  "properties": {
                    "start": {"type": "integer"},
                    "end": {"type": "integer"}
                  },
                  "description": "Position for fixed-width fields"
                },
                "format": {
                  "type": "string",
                  "description": "Format specification (for dates, etc.)"
                },
                "default": {
                  "type": "string",
                  "description": "Default value"
                },
                "nullable": {
                  "type": "boolean",
                  "default": true,
                  "description": "Whether column can be null"
                },
                "constraints": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Column constraints"
                },
                "transformations": {
                  "type": "object",
                  "properties": {
                    "upper": {"type": "boolean"},
                    "lower": {"type": "boolean"},
                    "trim": {"type": "boolean"},
                    "substring": {
                      "type": "object",
                      "properties": {
                        "start": {"type": "integer"},
                        "length": {"type": "integer"}
                      }
                    }
                  }
                }
              },
              "required": ["name", "dataType"]
            }
          }
        },
        "required": ["tableName", "columns"]
      }
    }
  },
  "required": ["loadData", "tableSpecifications"]
} 